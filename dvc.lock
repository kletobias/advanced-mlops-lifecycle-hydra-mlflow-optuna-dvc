schema: '2.0'
stages:
  v0_download_and_save_data:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=download_and_save_data
      transformations=download_and_save_data io_policy.READ_INPUT=False
    deps:
    - path: ./configs/data_versions/v0.yaml
      hash: md5
      md5: 258d575cae7fabdf3e1e6dd3f35a66e9
      size: 19
    - path: ./configs/transformations/download_and_save_data.yaml
      hash: md5
      md5: b8a63966e7e14bef2bf1df390f7cd955
      size: 536
    - path: ./dependencies/ingestion/download_and_save_data.py
      hash: md5
      md5: 49851010ea6c1f002ea600e2e2f6e302
      size: 2544
    - path: scripts/universal_step.py
      hash: md5
      md5: d9fcae3a85cea6b95e0eeaca5d09b5a7
      size: 7179
    outs:
    - path: ./data/v0/v0.csv
      hash: md5
      md5: 8c19c69cfa38a46003a14250479790e5
      size: 154786484
    - path: ./data/v0/v0_metadata.json
      hash: md5
      md5: ace284f1bab8791d06399c36e451de92
      size: 3075
  v0_sanitize_column_names:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=sanitize_column_names
      transformations=sanitize_column_names data_versions.data_version_output=v1 test_params=v1
    deps:
    - path: ./configs/data_versions/v0.yaml
      hash: md5
      md5: 2f7a7def306d8f094d1b698428fccff5
      size: 62
    - path: ./configs/transformations/sanitize_column_names.yaml
      hash: md5
      md5: 28cac61da69b878256e8a12b4153bd6b
      size: 54
    - path: ./dependencies/cleaning/sanitize_column_names.py
      hash: md5
      md5: a64f02435b246e56035df8d300fc4bf8
      size: 531
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v1/v1.csv
      hash: md5
      md5: 3f21c6536a40deaa9cd7f18429736caa
      size: 153299121
    - path: ./data/v1/v1_metadata.json
      hash: md5
      md5: 231084884cdac569ef10c59a720dfd49
      size: 3076
  v1_drop_description_columns:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=drop_description_columns
      transformations=drop_description_columns data_versions.data_version_input=v1
      data_versions.data_version_output=v2 test_params=v2
    deps:
    - path: ./configs/data_versions/v1.yaml
      hash: md5
      md5: 7c83dcdaa25414baa9782c4c734763ad
      size: 169
    - path: ./configs/transformations/drop_description_columns.yaml
      hash: md5
      md5: 72501a54f29f6848c7899ba02b973b8b
      size: 97
    - path: ./dependencies/transformations/drop_description_columns.py
      hash: md5
      md5: 3b71868f4759b90a3f4ab1deecaa571f
      size: 556
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v2/v2.csv
      hash: md5
      md5: 30fcbe4d53df3907e94417937a16c6d9
      size: 92476810
    - path: ./data/v2/v2_metadata.json
      hash: md5
      md5: 580b533dfd8b73ec2b4459ebf8ae131b
      size: 2489
  v2_median_profit:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=median_profit
      transformations=median_profit data_versions.data_version_input=v2 data_versions.data_version_output=v3
      test_params=v3
    deps:
    - path: ./configs/data_versions/v2.yaml
      hash: md5
      md5: 0c57d26e3755397b046c0ff0e28d5fb7
      size: 162
    - path: ./configs/transformations/median_profit.yaml
      hash: md5
      md5: bbf2e5bb570a73d0af96fd6abe4c36ef
      size: 162
    - path: ./dependencies/transformations/median_profit.py
      hash: md5
      md5: 6ea91abee4e71dee88b63669e4759201
      size: 565
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v3/v3.csv
      hash: md5
      md5: 50247671fa689dbf56c3f6c06d19de4f
      size: 105198573
    - path: ./data/v3/v3_metadata.json
      hash: md5
      md5: 493222b6e05c6156af2d423c75fe2367
      size: 2673
  v3_mean_profit:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=mean_profit
      transformations=mean_profit data_versions.data_version_input=v3 data_versions.data_version_output=v4
      test_params=v4
    deps:
    - path: ./configs/data_versions/v3.yaml
      hash: md5
      md5: aa2cf013f0d640b296d5527f45f4b351
      size: 182
    - path: ./configs/transformations/mean_profit.yaml
      hash: md5
      md5: 7809236b5e1bad7157aa0a5f6fa3d5da
      size: 148
    - path: ./dependencies/transformations/mean_profit.py
      hash: md5
      md5: f4bbd64b3a7a4a0d0df092d3a7f4a3c0
      size: 541
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v4/v4.csv
      hash: md5
      md5: dc8e0ecaace07efc499c73a703accf15
      size: 117118387
    - path: ./data/v4/v4_metadata.json
      hash: md5
      md5: 8a1273e176414af3f69dd3f7fc3b37c8
      size: 2854
  v4_total_mean_profit:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=total_mean_profit
      transformations=total_mean_profit data_versions.data_version_input=v4 data_versions.data_version_output=v5
      test_params=v5
    deps:
    - path: ./configs/data_versions/v4.yaml
      hash: md5
      md5: 194c8b17789574fb31829579985a98b0
      size: 139
    - path: ./configs/transformations/total_mean_profit.yaml
      hash: md5
      md5: 71dfe5ec7bb89c35ddec24f80d7e6d08
      size: 168
    - path: ./dependencies/transformations/total_mean_profit.py
      hash: md5
      md5: 3dc2e16721289ca44bdac10c947ebad6
      size: 580
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v5/v5.csv
      hash: md5
      md5: 85e8afd6699213c5020072d2d9d478cb
      size: 129165962
    - path: ./data/v5/v5_metadata.json
      hash: md5
      md5: cc98c5ecfcd2ab2538a273e879abd947
      size: 3041
  v5_total_median_profit:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=total_median_profit
      transformations=total_median_profit data_versions.data_version_input=v5 data_versions.data_version_output=v5_1
      test_params=v5_1
    deps:
    - path: ./configs/data_versions/v5.yaml
      hash: md5
      md5: 93a00bfff24076cbd9a559a80be73883
      size: 146
    - path: ./configs/transformations/total_median_profit.yaml
      hash: md5
      md5: 75491c9f01837ff536772d46ee840250
      size: 178
    - path: ./dependencies/transformations/total_median_profit.py
      hash: md5
      md5: 979014c7add816d0c5ebdecdf79b0fb0
      size: 731
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v5_1/v5_1.csv
      hash: md5
      md5: 5cd60fc8ef24561c9147a74b9d033c6d
      size: 141512178
    - path: ./data/v5_1/v5_1_metadata.json
      hash: md5
      md5: 047579990e7486622ea29e683fd1ff37
      size: 3234
  v5_1_total_median_cost:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=total_median_cost
      transformations=total_median_cost data_versions.data_version_input=v5_1 data_versions.data_version_output=v5_2
      test_params=v5_2
    deps:
    - path: ./configs/data_versions/v5.yaml
      hash: md5
      md5: 93a00bfff24076cbd9a559a80be73883
      size: 146
    - path: ./configs/transformations/total_median_cost.yaml
      hash: md5
      md5: 021e9228b65a59ef3b5c0502b9dee694
      size: 168
    - path: ./dependencies/transformations/total_median_cost.py
      hash: md5
      md5: d0fa8b55d6c5a05515908eb07230b8ab
      size: 580
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v5_2/v5_2.csv
      hash: md5
      md5: 5bb78a2541829f3621250b46684066ce
      size: 151682980
    - path: ./data/v5_2/v5_2_metadata.json
      hash: md5
      md5: c290b089450c0d48dba4b7adcb3924ea
      size: 3421
  v5_2_total_mean_cost:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=total_mean_cost
      transformations=total_mean_cost data_versions.data_version_input=v5_2 data_versions.data_version_output=v6
      test_params=v6
    deps:
    - path: ./configs/data_versions/v5_2.yaml
      hash: md5
      md5: 114da624f39d404172f70075b8a36f02
      size: 149
    - path: ./configs/transformations/total_mean_cost.yaml
      hash: md5
      md5: 0cbdad5655f7fb9e82e032c80836f562
      size: 158
    - path: ./dependencies/transformations/total_mean_cost.py
      hash: md5
      md5: 483179bcf47dfd7a2f9a35f0917021e3
      size: 562
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v6/v6.csv
      hash: md5
      md5: bec1eedc70b2028e0acb07c82b4593ba
      size: 161936326
    - path: ./data/v6/v6_metadata.json
      hash: md5
      md5: 69e0d5890b56136ebc93990e74c0305a
      size: 3602
  v6_drop_rare_drgs:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=drop_rare_drgs
      transformations=drop_rare_drgs data_versions.data_version_input=v6 data_versions.data_version_output=v7
      test_params=v7
    deps:
    - path: ./configs/data_versions/v6.yaml
      hash: md5
      md5: f6fee75177b9f658b208aa65222e57ca
      size: 146
    - path: ./configs/transformations/drop_rare_drgs.yaml
      hash: md5
      md5: c34e5775c1198dd4d2a5f2a057b4e288
      size: 185
    - path: ./dependencies/transformations/drop_rare_drgs.py
      hash: md5
      md5: d2b7f778704bc2007c4f9e9056badf9d
      size: 1159
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v7/v7.csv
      hash: md5
      md5: cb0ca3b5ad3dc2bb4af170ed97f7dd9c
      size: 155168448
    - path: ./data/v7/v7_metadata.json
      hash: md5
      md5: 1e55cfb7bb893714623787978a7a0304
      size: 3600
  v7_agg_severities:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=agg_severities
      transformations=agg_severities data_versions.data_version_input=v7 data_versions.data_version_output=v8
      test_params=v8
    deps:
    - path: ./configs/data_versions/v7.yaml
      hash: md5
      md5: d1911add18fd2eaa27deec3a26c573c5
      size: 241
    - path: ./configs/transformations/agg_severities.yaml
      hash: md5
      md5: 7d3274528193d657d11f94beb62edcd1
      size: 672
    - path: ./dependencies/transformations/agg_severities.py
      hash: md5
      md5: 17ad20c660feefbd81d6e2ba2d31464c
      size: 3126
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v8/v8.csv
      hash: md5
      md5: 5ec64d07e0f36eaa7644b52760f35f51
      size: 71265370
    - path: ./data/v8/v8_metadata.json
      hash: md5
      md5: 571b6f61de337a6a43770f0df72369d2
      size: 3983
  v8_ratio_drg_facility_vs_year:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=ratio_drg_facility_vs_year
      transformations=ratio_drg_facility_vs_year data_versions.data_version_input=v8
      data_versions.data_version_output=v9 test_params=v9
    deps:
    - path: ./configs/data_versions/v8.yaml
      hash: md5
      md5: c50c3dcaf2e6c10169ec34d91c0c7b91
      size: 813
    - path: ./configs/transformations/ratio_drg_facility_vs_year.yaml
      hash: md5
      md5: 31a586028cf4c4cf31643dce373d970b
      size: 478
    - path: ./dependencies/transformations/ratio_drg_facility_vs_year.py
      hash: md5
      md5: 28026a7e8315e28b2871e1d29d302a7d
      size: 1932
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v9/v9.csv
      hash: md5
      md5: 9d623ccf81a51a3e7d6070c30023f37a
      size: 79740145
    - path: ./data/v9/v9_metadata.json
      hash: md5
      md5: 9d61523e28ca48486936923507cdce12
      size: 4536
  v9_yearly_discharge_bin:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=yearly_discharge_bin
      transformations=yearly_discharge_bin data_versions.data_version_input=v9 data_versions.data_version_output=v10
      test_params=v10
    deps:
    - path: ./configs/data_versions/v9.yaml
      hash: md5
      md5: 36049cd8dc35bc0165c9128acae6d720
      size: 348
    - path: ./configs/transformations/yearly_discharge_bin.yaml
      hash: md5
      md5: 80c9bdbb14764ce109a03eaa4114cf42
      size: 528
    - path: ./dependencies/transformations/yearly_discharge_bin.py
      hash: md5
      md5: e58d4b3dab27d46a6fe45fc69f3f5d56
      size: 1819
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v10/v10.csv
      hash: md5
      md5: 3c37138e25153ae3b3b0056de99a6dbc
      size: 80439047
    - path: ./data/v10/v10_metadata.json
      hash: md5
      md5: 484984f828ab175cef62215840168f5a
      size: 4721
  v10_lag_columns:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=lag_columns
      transformations=lag_columns data_versions.data_version_input=v10 data_versions.data_version_output=v11
      test_params=v11
    deps:
    - path: ./configs/data_versions/v10.yaml
      hash: md5
      md5: 32cc59dfe4489020a04cbccdb65efe0f
      size: 203
    - path: ./configs/transformations/lag_columns.yaml
      hash: md5
      md5: 1a141277ae23cf3f5c520a39b69547f3
      size: 577
    - path: ./dependencies/transformations/lag_columns.py
      hash: md5
      md5: 911943aea7ddcdbe08136a98ab1cf1e2
      size: 976
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v11/v11.csv
      hash: md5
      md5: f49788b7182657ea4df4b5dc1d0100ad
      size: 136078511
    - path: ./data/v11/v11_metadata.json
      hash: md5
      md5: b70ce97614d5cf907e65901f92159916
      size: 7643
  v11_rolling_columns:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=rolling_columns
      transformations=rolling_columns data_versions.data_version_input=v11 data_versions.data_version_output=v12
      test_params=v12
    deps:
    - path: ./configs/data_versions/v11.yaml
      hash: md5
      md5: 76c05a8f49785f33b87909cae0550bae
      size: 744
    - path: ./configs/transformations/rolling_columns.yaml
      hash: md5
      md5: a2e88090ef9d2e673e1475eefc85dac8
      size: 450
    - path: ./dependencies/transformations/rolling_columns.py
      hash: md5
      md5: af8c93091454363c9cf336f62723e1ef
      size: 1424
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v12/v12.csv
      hash: md5
      md5: 871e4295e4f5e77ea59cf6419bbd8f32
      size: 187073670
    - path: ./data/v12/v12_metadata.json
      hash: md5
      md5: c14ab35a6d20fdd89b7c3cbbf317dd4f
      size: 10436
  v12_drop_non_lag_columns:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=drop_non_lag_columns
      transformations=drop_non_lag_columns data_versions.data_version_input=v12 data_versions.data_version_output=v13
      test_params=v13
    deps:
    - path: ./configs/data_versions/v12.yaml
      hash: md5
      md5: 4a60d40ca5a3a900f408704133e1bcca
      size: 406
    - path: ./configs/transformations/drop_non_lag_columns.yaml
      hash: md5
      md5: add048768f6c41ed9e1afb45d6e7a6ba
      size: 391
    - path: ./dependencies/transformations/drop_non_lag_columns.py
      hash: md5
      md5: b19537455d092f3725a4388d38ba4597
      size: 317
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
    outs:
    - path: ./data/v13/v13.csv
      hash: md5
      md5: 0cb8e7322c0e11c8318bedfee1f03c5d
      size: 133443674
    - path: ./data/v13/v13_metadata.json
      hash: md5
      md5: a79f3d222ee0b7f21a0da40ab57dfc76
      size: 7909
  v13_rf_optuna_trial:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=rf_optuna_trial
      transformations=rf_optuna_trial data_versions.data_version_input=v13 io_policy.WRITE_OUTPUT=false
      model_params=rf_optuna_trial_params
    deps:
    - path: ./configs/data_versions/v13.yaml
      hash: md5
      md5: 5c8659ddb216fab24782dc7c62edb2e5
      size: 170
    - path: ./configs/transformations/rf_optuna_trial.yaml
      hash: md5
      md5: 1a554531f761a506b2ba392557c3d351
      size: 1131
    - path: ./dependencies/modeling/rf_optuna_trial.py
      hash: md5
      md5: 177dcf11b67b99f2a36527ee696980f7
      size: 8906
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
  v13_ridge_optuna_trial:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=ridge_optuna_trial
      transformations=ridge_optuna_trial data_versions.data_version_input=v13 data_versions.data_version_output=v13
      io_policy.WRITE_OUTPUT=false model_params=ridge_optuna_trial_params
    deps:
    - path: ./configs/data_versions/v13.yaml
      hash: md5
      md5: 5c8659ddb216fab24782dc7c62edb2e5
      size: 170
    - path: ./configs/transformations/ridge_optuna_trial.yaml
      hash: md5
      md5: 9f7ba5561ecb3365e443d440c3234671
      size: 896
    - path: ./dependencies/modeling/ridge_optuna_trial.py
      hash: md5
      md5: 1dc1218f15f575d7b39799f30ec1670f
      size: 8979
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
  v14_rf_optuna_trial:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=rf_optuna_trial
      transformations=rf_optuna_trial data_versions.data_version_input=v14 data_versions.data_version_output=v14
      io_policy.WRITE_OUTPUT=false model_params=rf_optuna_trial_params logging_utils.level=10
    deps:
    - path: ./configs/data_versions/v14.yaml
      hash: md5
      md5: 7b250d96afb011c253cb729c3e727fd5
      size: 143
    - path: ./configs/transformations/rf_optuna_trial.yaml
      hash: md5
      md5: 1a554531f761a506b2ba392557c3d351
      size: 1131
    - path: ./dependencies/modeling/rf_optuna_trial.py
      hash: md5
      md5: b69c7ce1ac4bc06a01b65792964a3f41
      size: 10412
    - path: scripts/universal_step.py
      hash: md5
      md5: b96ad9c6903974cfd9cbecea372e42b8
      size: 8989
  v0_ingest_data:
    cmd: $CMD_PYTHON scripts/universal_step.py setup.script_base_name=ingest_data
      transformations=ingest_data io_policy.READ_INPUT=False
    deps:
    - path: ./configs/data_versions/v0.yaml
      hash: md5
      md5: 2f7a7def306d8f094d1b698428fccff5
      size: 62
    - path: ./configs/transformations/ingest_data.yaml
      hash: md5
      md5: 4ca102c70723d871dfccd0632b5a6a70
      size: 521
    - path: ./dependencies/ingestion/ingest_data.py
      hash: md5
      md5: 79a229d15d7bcc61a287b0dc304e2a08
      size: 2755
    - path: scripts/universal_step.py
      hash: md5
      md5: b250b4f1a92ce62182d97f235f798efc
      size: 9003
    outs:
    - path: ./data/v0/v0.csv
      hash: md5
      md5: 8c19c69cfa38a46003a14250479790e5
      size: 154786484
    - path: ./data/v0/v0_metadata.json
      hash: md5
      md5: 0b69bdd9bf3c8170e4193702c78c3553
      size: 3076
